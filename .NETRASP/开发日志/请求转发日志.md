# 请求转发日志

## Note

- [Agent 数据传输格式](http://cd.xmirror.com.cn:89/pages/viewpage.action?pageId=36110338)
- [发送/接收 json 数据](https://mlog.club/article/87129)

## 转发地址

## 参数

| Tomcat | /    | 192.168.172.138 | 9090 | EAB1OGMIFVGRGICI | NUZFOFSZCWUXGPLT |
| ------ | ---- | --------------- | ---- | ---------------- | ---------------- |
| server | path | ip              | port | 密码             | AgentId          |

## Json 格式检查

### 加密前的结果

```json
{
  "id": "1UB11YMBATNOZFBH",
  "ts": 1595645524,
  "msg": {
    "result": {
      "urls": [
        {
          "method": "GET",
          "url": "https://localhost:5001/",
          "data": "",
          "headers": {
            "Cookie": null,
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
            "Upgrade-Insecure-Requests": "1",
            "Connection": null,
            "Referer": null,
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36",
            "Host": "localhost:5001",
            "Accept-Encoding": "gzip, deflate, br",
            "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8"
          },
          "iastrange": ["sql"]
        }
      ]
    },
    "cmd": 4001
  }
}
```

### 加密后的结果

```json
{
  "id": "1UB11YMBATNOZFBH",
  "aes": "TvIAkheglCRKX1S/OGaNfqBDs+2qQGmoijERgRuNCmhWSf2jzV8bRYqXpxeQpXWZ2xdL8lPFIHehaVMoHA5xsOHjy6je1kU7gpSk7qvUu5d9wEu3fnrZdsGT/X41OeHBvhVqYGhZ+wA1BHARrMKWW9isbGaY3+kw4nYmj13kfkZXG3cIVuUZQ6imdoYKtl+W8kZmf8UzH5j45tI8rvRmij0GxKUF1oNhldkcZajss/H/sg6UAmTHLUZJtkaILWLwu3LojNvLgsydbdvFC3V02xiu186oIuiD3UAlHhtNzbGGs3TU025P296Egn6XYnNi4OH4xCoN8SShSAv9AGRq1er9s7faz3sN5hVsIbXe6KC2BO73o9duGujHuS0SDJQwXLVlFCEXAM0aYFnCy/kaSDClQaXFhCCiv+5EN9OaGV2c2vKccb2TxKXtjpChO4BgGguAWQ//E+R+klfoNp7imLg1Dgu8K6YAr42cNraG5hz1dByzPhY2ygDHh2l4jjc6+vgYq5CxHvv9+Uv8Z05FFuMBZAHBqKF8K90xBkX4PBadcaEHMUwo5dvU0ZTxerpC+jKmFsgoUUppDokAsYSuX9MvUPBfrV/OaBY0bbRNr5WgctK+gtFBbuy3aekZ+dxUti0zK8/SyyU10plFqtfHgy67EDP8S5EZU1A2ph83Gh0yjHibjfjNk13HkTAExzv7r6mXIHcuAyy7aP1vGjC7npS4QTN0l6N3RnonMxYcWy+qsD12hlTgPR5+9dRKqTaxMKp3hV2zb3IOwuatUXEVzMfMETJc1poZct5VXQ22NEfv0CoquwGvh4+kJNURy/Vh",
  "aestag": "TEFUTkxPRlBWVkRHQUVWRw==",
  "aesnonce": "VE9ETzpyYW5kb20="
}
```

### 解密后的结果

```json
{
  "id": "1UB11YMBATNOZFBH",
  "ts": 1595645524,
  "msg": {
    "result": {
      "urls": [
        {
          "method": "GET",
          "url": "https://localhost:5001/",
          "data": "",
          "headers": {
            "Cookie": null,
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
            "Upgrade-Insecure-Requests": "1",
            "Connection": null,
            "Referer": null,
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36",
            "Host": "localhost:5001",
            "Accept-Encoding": "gzip, deflate, br",
            "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8"
          },
          "iastrange": ["sql"]
        }
      ]
    },
    "cmd": 4001
  }
}
```
